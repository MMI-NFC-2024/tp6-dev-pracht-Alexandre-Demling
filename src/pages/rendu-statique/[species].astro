---
import penguins from "../../assets/penguins.json";
import PlotFigure from "../../components/PlotFigure.astro";
import * as Plot from "@observablehq/plot";

export async function getStaticPaths() {
  const speciesList = [...new Set(penguins.map(p => p.species))];
  return speciesList.map(species => ({ params: { species } }));
}

const { species } = Astro.params;
const filtered = penguins.filter(p => p.species === species);

const options = {
  marks: [
    Plot.dot(filtered, {
      x: "culmen_length_mm",
      y: "culmen_depth_mm",
      fill: "orange"
    })
  ],
  x: { label: "Longueur du bec" },
  y: { label: "Profondeur du bec " },
  title: `Pingouins - ${species}`
};
---

<h1>Graphique statique pour l'esp√®ce : {species}</h1>
<PlotFigure options={options} />
